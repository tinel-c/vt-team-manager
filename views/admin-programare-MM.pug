doctype html
//
  =========================================================
  * VT Team manager
  =========================================================
head
  meta(charset='utf-8')
  meta(name='viewport' content='width=device-width, initial-scale=1, shrink-to-fit=no')
  meta(name='description' content='Manage your team with the all in one dashboard')
  meta(name='author' content='Constantin Bogza')
  meta(name='base-author' content='Creative Tim')

  link(href='https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css' rel='stylesheet' integrity='sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC' crossorigin='anonymous')
  // Add the slick-theme.css if you want default styling
  link(rel='stylesheet' type='text/css' href='https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.css')
  link(rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick-theme.css')
  link(rel='stylesheet' href='https://use.fontawesome.com/releases/v5.15.3/css/all.css' integrity='sha384-SZXxX4whJ79/gErwcOYf+zWLeJdY/qpuqC4cAa9rOGUstPomtqpuNWT9wdPEn2fk' crossorigin='anonymous')
  link(rel='stylesheet' href='./assets/css/calendar.css')
  link(rel='stylesheet' href='./assets/css/error-too-many-apps.css')
  link(rel='stylesheet' href='./assets/css/programari-grid.css')
  //- script(src='./assets/js/selectorEmail.js')

  title Admin Programare MM
  // Favicon
  link(rel='icon' href='../assets/img/brand/favicon.ico' type='image/ico')
  // Fonts
  link(rel='stylesheet' href='https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700')
  // Icons
  link(rel='stylesheet' href='../assets/vendor/nucleo/css/nucleo.css' type='text/css')
  link(rel='stylesheet' href='../assets/vendor/@fortawesome/fontawesome-free/css/all.min.css' type='text/css')
  // Argon CSS
  link(rel='stylesheet' href='../assets/css/argon.css?v=1.2.0' type='text/css')
  link(rel='stylesheet' href='../assets/css/search-box.css' type='text/css')
// Sidenav
nav#sidenav-main.sidenav.navbar.navbar-vertical.fixed-left.navbar-expand-xs.navbar-light.bg-white
  .scrollbar-inner
    // Brand
    .sidenav-header.align-items-center
      a.navbar-brand(href='/dashboard')
        img.navbar-brand-img(src='assets/img/brand/vt-team-manager.png' alt='...')
    .navbar-inner
      // Collapse
      #sidenav-collapse-main.collapse.navbar-collapse
        // Nav items
        ul.navbar-nav
          li.nav-item
            a.nav-link(href='/dashboard')
              i.ni.ni-tv-2.text-primary
              span.nav-link-text Dashboard
          
          li.nav-item
            a.nav-link(href='/medical-check')
              i.ni.ni-ambulance.text-primary
              span.nav-link-text Medical check overview
          li.nav-item
            a.nav-link(href='/programare-MM')
              i.ni.ni-ambulance2.text-primary
              span.nav-link-text Programare MM
          
          - if (sessionUser.role == "team leader")
            li.nav-item
              a.nav-link(href='/team-leader-page')
                i.ni.ni-briefcase-24.text-primary
                span.nav-link-text Team leader's page
          - if (sessionUser.role == "admin" || sessionUser.role == "esh manager")
            li.nav-item
              a.nav-link(href='/admin-page')
                i.ni.admin-icon.text-primary
                span.nav-link-text Admin's page
        
// Main content
.main-content
  // Header
  .header.bg-gradient-primary.py-7.py-lg-5.pt-lg-5
    .container
      .thisIsAnError #{messages.error}
      .header-body.text-center.mb-7
        .row.justify-content-center
          .col-xl-5.col-lg-6.col-md-8.px-5
            b.text-lead.text-white Make an appointment for the medical check:
    .separator.separator-bottom.separator-skew.zindex-100
      svg(x='0' y='0' viewbox='0 0 2560 100' preserveaspectratio='none' version='1.1' xmlns='http://www.w3.org/2000/svg')
        polygon.fill-default(points='2560 0 2560 100 0 100')
  // Page content
  .container.mt--8.pb-5
    .row.justify-content-center
      .col-lg-5.col-md-7
        .card.bg-secondary.border-0.mb-0
          .card-header.bg-transparent.pb-666
            form(role='form' action="/admin-delete-programare-MM" method="post")
              h1 user's next appointment:
                div(id="hiddenOrNot")
                  input.btn-check.hidden-email-imput(type='radio' name='hiddenDeleteTimeSlot' id="hiddenDeleteTimeSlot" autocomplete='off' checked)
                  input.btn-check(type='radio' name='deleteTimeSlot' id="deleteTimeSlot" autocomplete='off')
                  label.btn.btn-primary.c-list__link.c-media(for="deleteTimeSlot")
                    .c-schedule
                      .c-schedule__item.height.borderColor
                        div(id="users")
                  input.hidden-email-imput(id="formalNameForDeletedAppointment" type='text' name='formalNameForDeletedAppointment')
                  //- each userInterval in userIntervals
                    -jj = new Date(userInterval.Starting_Hour)
                    - if (! (new Date(userInterval.Starting_Hour) < new Date())) //afisam doar programarile neexpirate
                      - let startingHour = userInterval.Starting_Hour.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit', hour12 : false});
                      - let endingHour = userInterval.Ending_Hour.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit', hour12 : false});
                      - if (startingHour < 10) {startingHour = "0" + startingHour;}
                      - if (endingHour < 10) {endingHour = "0" + endingHour;}
                      input.btn-check(type='radio' name='deleteTimeSlot' id=jj  value=jj autocomplete='off' required)
                      label.btn.btn-primary.c-list__link.c-media(for=jj)
                        .c-schedule
                          .c-schedule__item.height.borderColor
                            //- p #{userInterval.Starting_Hour}
                            strong.u-text--info #{userInterval.Starting_Hour.toLocaleString('en-us', {weekday:'long'})+", "+userInterval.Starting_Hour.getUTCDate()+" "+userInterval.Starting_Hour.toLocaleString('en', { month: 'short' })+" "+userInterval.Starting_Hour.getUTCFullYear() + ", " + startingHour + "-" + endingHour}
                .text-center
                  button#sign-in.btn.btn-primary.my-4(type='submit' value='Submit') Delete
  br
  br
  br
  br
  .container.mt--8.pb-5
    .row.justify-content-center
      .col-lg-5.col-md-7
        .card.bg-secondary.border-0.mb-0
          .card-header.bg-transparent.pb-666
            form(role='form' action="/admin-programare-MM" method="post")
              h1 Make a new appointment:
              div(class="dropdownsearch")
                div(class="options")
                  select(name="Formal_Name" placeholder="Select your name" id="dynamic_select")
                    each user in usersLists
                      option.text-center(id="selectedOption" email=user.email_angajat value=user.Formal_Name) #{user.Formal_Name}
              .form-group
                .input-group.input-group-merge.input-group-alternative
                  .input-group-prepend
                    span.input-group-text
                      i.ni
                  input.form-control(id="email" placeholder='Email' type='email' name='email_angajat' required)
              .l-layout
                each appointment in appointments
                  .c-card
                    .c-card__body.u-padding-b--xs
                      .c-schedule
                        .arrow_prev
                          i.fas.fa-long-arrow-alt-left.fa-2x
                        strong.u-text--info #{appointment.Date.toLocaleString('en-us', {weekday:'long'})+", "+appointment.Date.getUTCDate()+" "+appointment.Date.toLocaleString('en', { month: 'short' })+" "+appointment.Date.getUTCFullYear()}
                        .arrow_next
                          i.fas.fa-long-arrow-alt-right.fa-2x
                    ul#flightList.c-list
                      -for(let i = new Date(appointment.Starting_Hour); i<new Date(appointment.Ending_Hour);)
                        - let ok = 0
                        - let Name = ""
                        each interval in appointment.intervals 
                          - let ddate = interval.Starting_Hour.toLocaleTimeString()
                          - if(i.toLocaleTimeString([], {timeZone: 'UTC'}) == ddate){
                          //- -   console.log("--- "+i.toLocaleTimeString([], {timeZone: 'UTC'})+" --- " +ddate +" ---")
                          -   ok=1
                          -   Name=interval.Name}
                        - if(ok==0)
                            input.btn-check(type='radio' name='timeSlot' id=i value=i autocomplete='off' required)
                        - else
                            input.btn-check.borderColor(type='radio' name='timeSlot' id=i value=i autocomplete='off' disabled='')
                        //input.btn-check(type='radio' name='timeSlot' id=i value=i autocomplete='off')
                        label.btn.btn-primary.c-list__link.c-media(for=i)
                          .c-schedule
                            .c-schedule__item.height.borderColor
                              strong #{i.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit', hour12 : false, timeZone: 'UTC'})}
                            .c-schedule__item.height.borderColor
                              - i.setTime(i.getTime()+10*60*1000)
                              - j++
                              strong #{i.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit', hour12 : false, timeZone: 'UTC'})}
                            - if ( ok == 1 )
                                .c-schedule__item.height.borderColor
                                  small #{Name}
                            //- - if(currentUserName == Name)
                            //-   button(type="submit")
              .text-center
                button#sign-in.btn.btn-primary.my-4(type='submit' value='Submit') Submit
  br
  br
  br
  br
  
// Core
script(src='../assets/vendor/jquery/dist/jquery.min.js')
script(src='../assets/vendor/bootstrap/dist/js/bootstrap.bundle.min.js')
script(src='../assets/vendor/js-cookie/js.cookie.js')
script(src='../assets/vendor/jquery.scrollbar/jquery.scrollbar.min.js')
script(src='../assets/vendor/jquery-scroll-lock/dist/jquery-scrollLock.min.js')
// Argon JS
script(src='../assets/js/argon.js?v=1.2.0')
// Add custom js
script(src='../assets/js/auth.js')
//script(src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js")

script(src='../assets/js/search-box.js')
script(src='https://code.jquery.com/jquery-3.6.0.min.js' integrity='sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=' crossorigin='anonymous')
script(src='https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js' integrity='sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM' crossorigin='anonymous')
script(type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.min.js')
script(src='./assets/js/calendar.js')
script(defer src='./assets/js/admin-programare-delete.js')

//- script(src='./assets/js/selectorEmail.js')
